<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>ğŸ“¦ Event-Carried State Transfer (ECST) vs Command via Messaging vs BFF | BitsInCloud</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Event-Carried State Transfer (ECST) vs Command via Messaging vs BFF"><meta name=generator content="Hugo 0.145.0"><meta name=robots content="index, follow"><link rel=stylesheet href=/bitsincloud-blog/ananke/css/main.min.d05fb5f317fcf33b3a52936399bdf6f47dc776516e1692e412ec7d76f4a5faa2.css><link rel=canonical href=https://rogeriofontes.github.io/bitsincloud-blog/posts/event-carried-state-transfer-ecst-vs-command-via-messaging/><meta property="og:url" content="https://rogeriofontes.github.io/bitsincloud-blog/posts/event-carried-state-transfer-ecst-vs-command-via-messaging/"><meta property="og:site_name" content="BitsInCloud"><meta property="og:title" content="ğŸ“¦ Event-Carried State Transfer (ECST) vs Command via Messaging vs BFF"><meta property="og:description" content="Event-Carried State Transfer (ECST) vs Command via Messaging vs BFF"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-09T20:14:52-03:00"><meta property="article:modified_time" content="2025-03-09T20:14:52-03:00"><meta property="article:tag" content="EC2"><meta property="article:tag" content="Blog"><meta property="article:tag" content="Hugo"><meta itemprop=name content="ğŸ“¦ Event-Carried State Transfer (ECST) vs Command via Messaging vs BFF"><meta itemprop=description content="Event-Carried State Transfer (ECST) vs Command via Messaging vs BFF"><meta itemprop=datePublished content="2025-03-09T20:14:52-03:00"><meta itemprop=dateModified content="2025-03-09T20:14:52-03:00"><meta itemprop=wordCount content="510"><meta itemprop=keywords content="EC2,Blog,Hugo"><meta name=twitter:card content="summary"><meta name=twitter:title content="ğŸ“¦ Event-Carried State Transfer (ECST) vs Command via Messaging vs BFF"><meta name=twitter:description content="Event-Carried State Transfer (ECST) vs Command via Messaging vs BFF"></head><body class="ma0 avenir bg-near-white production"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/bitsincloud-blog/ class="f3 fw2 hover-white no-underline white-90 dib">BitsInCloud</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked ttu">Posts</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">ğŸ“¦ Event-Carried State Transfer (ECST) vs Command via Messaging vs BFF</h1><time class="f6 mv4 dib tracked" datetime=2025-03-09T20:14:52-03:00>March 9, 2025</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Neste artigo, explico de forma prÃ¡tica e objetiva os padrÃµes <strong>ECST</strong>, <strong>Command via Messaging</strong> e como eles se comparam ao tradicional <strong>BFF (Backend for Frontend)</strong> em uma arquitetura de microsserviÃ§os.</p><hr><h2 id=-1-event-carried-state-transfer-ecst>ğŸ“˜ 1. Event-Carried State Transfer (ECST)</h2><h3 id=-definiÃ§Ã£o-tÃ©cnica>âœ… DefiniÃ§Ã£o tÃ©cnica</h3><blockquote><p>Event-Carried State Transfer Ã© um padrÃ£o onde um serviÃ§o, ao modificar um dado (como criar ou atualizar um cliente), <strong>emite um evento contendo o estado completo da entidade</strong>. Outros serviÃ§os que precisem desses dados escutam esse evento e mantÃªm uma cÃ³pia local, garantindo <strong>consistÃªncia eventual</strong>.</p></blockquote><h3 id=-explicaÃ§Ã£o-facilitada>ğŸ’¡ ExplicaÃ§Ã£o facilitada</h3><p>Imagine o <code>cliente-service</code> como o serviÃ§o principal de cadastro de clientes. Quando ele cria ou atualiza um cliente, ele <strong>avisa os outros serviÃ§os</strong> enviando um evento com <strong>todos os dados</strong> do cliente (nome, e-mail, etc).</p><p>Outros serviÃ§os (como um <code>marketing-service</code>) escutam esse evento e <strong>atualizam seu banco local</strong>, sem precisar perguntar diretamente ao <code>cliente-service</code>.</p><hr><h2 id=-2-command-via-messaging>ğŸ“˜ 2. Command via Messaging</h2><h3 id=-definiÃ§Ã£o-tÃ©cnica-1>âœ… DefiniÃ§Ã£o tÃ©cnica</h3><blockquote><p>Command via Messaging Ã© um padrÃ£o onde um serviÃ§o envia uma <strong>mensagem com uma intenÃ§Ã£o clara (um comando)</strong> para outro serviÃ§o realizar uma aÃ§Ã£o especÃ­fica, como criar um novo cliente. Essa mensagem Ã© processada de forma assÃ­ncrona por quem recebe.</p></blockquote><h3 id=-explicaÃ§Ã£o-facilitada-1>ğŸ’¡ ExplicaÃ§Ã£o facilitada</h3><p>Imagine que o <code>API Gateway</code> quer cadastrar um novo cliente. Em vez de chamar diretamente o <code>cliente-service</code> via HTTP, ele <strong>envia uma mensagem</strong> para uma fila dizendo:</p><blockquote><p>â€œ<code>cliente-service</code>, por favor, **crie esse cliente com nome e email X`â€.</p></blockquote><p>O <code>cliente-service</code> escuta essa fila, processa a mensagem e salva o cliente no banco.</p><hr><h2 id=-comparaÃ§Ã£o-com-bff-backend-for-frontend>ğŸ”„ ComparaÃ§Ã£o com BFF (Backend for Frontend)</h2><table><thead><tr><th>Conceito</th><th>ECST</th><th>Command via Messaging</th><th>BFF (Backend for Frontend)</th></tr></thead><tbody><tr><td>Tipo de comunicaÃ§Ã£o</td><td><strong>Evento</strong></td><td><strong>Comando</strong></td><td><strong>RequisiÃ§Ã£o direta HTTP</strong></td></tr><tr><td>Quem inicia a aÃ§Ã£o?</td><td>ServiÃ§o que detÃ©m os dados</td><td>Outro serviÃ§o ou gateway</td><td>Frontend via browser ou app</td></tr><tr><td>Objetivo</td><td>Notificar mudanÃ§a de estado</td><td>Solicitar que outro serviÃ§o execute uma aÃ§Ã£o</td><td>Adaptar chamadas para mÃºltiplos serviÃ§os</td></tr><tr><td>Quem salva os dados?</td><td>ServiÃ§o original (dono do estado)</td><td>ServiÃ§o que recebeu o comando</td><td>BFF nÃ£o salva, apenas coordena</td></tr><tr><td>Forma de acoplamento</td><td>Fraco (publica/escuta)</td><td>Fraco (comando assÃ­ncrono)</td><td>MÃ©dio (precisa conhecer os serviÃ§os chamados)</td></tr><tr><td>ComunicaÃ§Ã£o</td><td>AssÃ­ncrona (eventos via fila)</td><td>AssÃ­ncrona (comando via fila)</td><td>SÃ­ncrona (requisiÃ§Ãµes HTTP)</td></tr><tr><td>Exemplo de uso</td><td><code>cliente-service</code> envia evento com cliente criado</td><td><code>API Gateway</code> envia comando para criar cliente</td><td>Frontend chama <code>/bff/clientes</code> que redireciona</td></tr></tbody></table><hr><h2 id=-quando-usar-cada-um>âœï¸ Quando usar cada um?</h2><table><thead><tr><th>SituaÃ§Ã£o</th><th>Ideal</th></tr></thead><tbody><tr><td>VocÃª quer manter cÃ³pias locais de dados em outros serviÃ§os</td><td>âœ… ECST</td></tr><tr><td>VocÃª quer executar uma aÃ§Ã£o remota de forma desacoplada</td><td>âœ… Command via Messaging</td></tr><tr><td>VocÃª precisa adaptar dados de mÃºltiplos serviÃ§os para o front</td><td>âœ… BFF</td></tr><tr><td>VocÃª quer que os serviÃ§os sejam independentes e resilientes</td><td>ECST ou Command via Messaging</td></tr></tbody></table><hr><h2 id=-conclusÃ£o>ğŸš€ ConclusÃ£o</h2><ul><li>O <strong>ECST</strong> Ã© excelente para replicar dados entre serviÃ§os e reduzir acoplamento.</li><li>O <strong>Command via Messaging</strong> ajuda a executar aÃ§Ãµes entre serviÃ§os sem dependÃªncia direta.</li><li>O <strong>BFF</strong> continua sendo Ãºtil para adaptar dados entre o front-end e os microserviÃ§os, mas tem maior acoplamento.</li></ul><p>Cada padrÃ£o tem seu contexto ideal, e usÃ¡-los corretamente ajuda a construir sistemas mais <strong>resilientes, escalÃ¡veis e desacoplados</strong>.</p><hr><p>ğŸ’¬ Gostou? Tem dÃºvidas ou quer ver exemplos prÃ¡ticos com Spring Boot e RabbitMQ? Deixe seu comentÃ¡rio ou me chame!</p><ul class=pa0><li class="list di"><a href=/bitsincloud-blog/tags/ec2/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">EC2</a></li><li class="list di"><a href=/bitsincloud-blog/tags/blog/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Blog</a></li><li class="list di"><a href=/bitsincloud-blog/tags/hugo/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Hugo</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/bitsincloud-blog/posts/ec2-fleet/>Ec2 Fleet - Como Criar uma Frota de EC2 e fazer o escalonamento</a></li><li class=mb2><a href=/bitsincloud-blog/posts/meu-primeiro-post/>Bem Vindo ao Meu Blog</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://rogeriofontes.github.io/bitsincloud-blog/>&copy; BitsInCloud 2025</a><div><div class=ananke-socials></div></div></div></footer></body></html>